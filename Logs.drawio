<mxfile host="app.diagrams.net" modified="2020-04-23T17:29:28.826Z" agent="5.0 (Windows)" etag="KJ2j7mHdplKlHkA_i6a5" version="12.9.8" type="github">
  <diagram id="jYejewZL4RnewdmWwtDY" name="Page-1">
    <mxGraphModel dx="1460" dy="1258" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="s8IivAvc6s-XAy5n7E5O-6" value="&lt;div&gt;&amp;nbsp;&amp;nbsp; Log Functions&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;labelPosition=center;verticalLabelPosition=middle;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="750" height="2160" as="geometry" />
        </mxCell>
        <mxCell id="s8IivAvc6s-XAy5n7E5O-7" value="&lt;div&gt;ADD LOG TO DATABASE&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;func AddLogToDatabase(l Log) error { }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-- Adds a log into the &#39;LogDatabase&#39; bucket&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;#34;consolas&amp;#34; ; font-size: 9.8pt&quot;&gt;&lt;span style=&quot;color: #787878&quot;&gt;// AddLogToDatabase() adds a created log into the &#39;LogDatabase&#39; bucket&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #c7773e&quot;&gt;func &lt;/span&gt;&lt;span style=&quot;color: #e6b163&quot;&gt;AddLogToDatabase&lt;/span&gt;(l &lt;span style=&quot;color: #6fafbd&quot;&gt;Log&lt;/span&gt;) &lt;span style=&quot;color: #c7773e&quot;&gt;error&lt;/span&gt;{&lt;br&gt;   &lt;span style=&quot;color: #c7773e&quot;&gt;var &lt;/span&gt;logs []&lt;span style=&quot;color: #6fafbd&quot;&gt;Log&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #6fafbd&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #6fafbd&quot;&gt;   &lt;/span&gt;&lt;span style=&quot;color: #787878&quot;&gt;//Check if the logs exists&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #787878&quot;&gt;   &lt;/span&gt;&lt;span style=&quot;color: #c7773e&quot;&gt;return &lt;/span&gt;LogsDatabase.&lt;span style=&quot;color: #b09d79&quot;&gt;Update&lt;/span&gt;(&lt;span style=&quot;color: #c7773e&quot;&gt;func&lt;/span&gt;(tx *&lt;span style=&quot;color: #afbf7e&quot;&gt;bolt&lt;/span&gt;.&lt;span style=&quot;color: #6fafbd&quot;&gt;Tx&lt;/span&gt;) &lt;span style=&quot;color: #c7773e&quot;&gt;error&lt;/span&gt;{&lt;br&gt;      b := tx.&lt;span style=&quot;color: #b09d79&quot;&gt;Bucket&lt;/span&gt;([]&lt;span style=&quot;color: #c7773e&quot;&gt;byte&lt;/span&gt;(&lt;span style=&quot;color: #6a8759&quot;&gt;&quot;LogDatabase&quot;&lt;/span&gt;))&lt;br&gt;      &lt;span style=&quot;color: #c7773e&quot;&gt;if &lt;/span&gt;b == &lt;span style=&quot;color: #c7773e&quot;&gt;nil&lt;/span&gt;{&lt;br&gt;         &lt;span style=&quot;color: #787878&quot;&gt;//No bucket found - return error&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #787878&quot;&gt;         &lt;/span&gt;&lt;span style=&quot;color: #c7773e&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #afbf7e&quot;&gt;errors&lt;/span&gt;.&lt;span style=&quot;color: #b09d79&quot;&gt;New&lt;/span&gt;(&lt;span style=&quot;color: #6a8759&quot;&gt;&quot;Bucket Not Found: LogDatabase&quot;&lt;/span&gt;)&lt;br&gt;      }&lt;br&gt;&lt;br&gt;      &lt;span style=&quot;color: #787878&quot;&gt;// Convert the users email address into a security code&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #787878&quot;&gt;      &lt;/span&gt;s := &lt;span style=&quot;color: #afbf7e&quot;&gt;security&lt;/span&gt;.&lt;span style=&quot;color: #b09d79&quot;&gt;CreateSecurityCode&lt;/span&gt;([]&lt;span style=&quot;color: #c7773e&quot;&gt;byte&lt;/span&gt;(l.Entity))&lt;br&gt;&lt;br&gt;      &lt;span style=&quot;color: #787878&quot;&gt;// Pull all of the logs for the user to append this new log to&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #787878&quot;&gt;      &lt;/span&gt;logs = &lt;span style=&quot;color: #b09d79&quot;&gt;PollUserLogs&lt;/span&gt;(s)&lt;br&gt;      logs = &lt;span style=&quot;color: #c7773e&quot;&gt;append&lt;/span&gt;(logs&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;l)&lt;br&gt;&lt;br&gt;      &lt;span style=&quot;color: #787878&quot;&gt;// Marshal the log into a []byte&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #787878&quot;&gt;      &lt;/span&gt;&lt;span style=&quot;color: #c7773e&quot;&gt;if &lt;/span&gt;buff&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;err := &lt;span style=&quot;color: #afbf7e&quot;&gt;json&lt;/span&gt;.&lt;span style=&quot;color: #b09d79&quot;&gt;Marshal&lt;/span&gt;(logs)&lt;span style=&quot;color: #cc7832&quot;&gt;; &lt;/span&gt;err != &lt;span style=&quot;color: #c7773e&quot;&gt;nil&lt;/span&gt;{&lt;br&gt;         &lt;span style=&quot;color: #c7773e&quot;&gt;return &lt;/span&gt;err&lt;br&gt;      }&lt;span style=&quot;color: #c7773e&quot;&gt;else&lt;/span&gt;{&lt;br&gt;         err1 := b.&lt;span style=&quot;color: #b09d79&quot;&gt;Put&lt;/span&gt;([]&lt;span style=&quot;color: #c7773e&quot;&gt;byte&lt;/span&gt;(s)&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;buff)&lt;br&gt;         &lt;span style=&quot;color: #c7773e&quot;&gt;if &lt;/span&gt;err1 != &lt;span style=&quot;color: #c7773e&quot;&gt;nil&lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #b09d79&quot;&gt;AddLogToDatabase&lt;/span&gt;(&lt;span style=&quot;color: #b09d79&quot;&gt;CreateLog&lt;/span&gt;(l.Entity&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #6a8759&quot;&gt;&quot;Error&quot;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #6a8759&quot;&gt;&quot;Couldn&#39;t Put Log into DB&quot;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #afbf7e&quot;&gt;time&lt;/span&gt;.&lt;span style=&quot;color: #b09d79&quot;&gt;Now&lt;/span&gt;()))&lt;br&gt;            &lt;span style=&quot;color: #c7773e&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #afbf7e&quot;&gt;utilities&lt;/span&gt;.&lt;span style=&quot;color: #b09d79&quot;&gt;CheckBasicError&lt;/span&gt;(err1)&lt;br&gt;         }&lt;span style=&quot;color: #c7773e&quot;&gt;else&lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #c7773e&quot;&gt;return nil&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #c7773e&quot;&gt;         &lt;/span&gt;}&lt;br&gt;      }&lt;br&gt;   })&lt;br&gt;}&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#006600;strokeColor=#82b366;verticalAlign=top;spacingLeft=7;" vertex="1" parent="1">
          <mxGeometry x="50" y="60" width="710" height="640" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
